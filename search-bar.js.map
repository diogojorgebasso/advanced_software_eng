{"version":3,"file":"search-bar.js","sourceRoot":"","sources":["src/search-bar.ts"],"names":[],"mappings":"AAAA;;;;GAIG;;;;;;;AAEH,OAAO,EAAC,GAAG,EAAE,IAAI,EAAE,UAAU,EAAC,MAAM,KAAK,CAAC;AAC1C,OAAO,EAAC,aAAa,EAAE,QAAQ,EAAC,MAAM,mBAAmB,CAAC;AAC1D,OAAO,cAAc,CAAA;AAErB;;;;;;GAMG;AAEI,IAAM,SAAS,GAAf,MAAM,SAAU,SAAQ,UAAU;IAAlC;;QAEL,iBAAY,GAAc,EAAE,CAAC;QAiD7B,gBAAW,GAAG,EAAE,CAAC;QAGjB,YAAO,GAAa,EAAE,CAAC;IA0DzB,CAAC;IAxDC,iBAAiB,CAAC,KAAY;QAC5B,MAAM,KAAK,GAAG,KAAK,CAAC,MAA0B,CAAC;QAC/C,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,KAAK,CAAC;IACjC,CAAC;IAED,YAAY;QACV,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;YACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACjJ,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,CAAC,mCAAmC;YAC1D,IAAI,CAAC,aAAa,EAAE,CAAC,IAAI,EAAE,CAAC;QAC9B,CAAC;IACH,CAAC;IAEO,KAAK,CAAC,aAAa;QACzB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACpC,MAAM,GAAG,GAAG,uDAAuD,GAAG,IAAI,CAAC;QAC3E,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACjB,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC;QAClC,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC;YACjB,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAA;QACpD,CAAC;QACD,IAAI,CAAC,YAAY,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;QAC1C,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;QAC9B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAA;QAE5C,MAAM,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,aAAa,CAAQ,CAAC;QAClE,YAAY,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC;IAC3C,CAAC;IAGQ,MAAM;QACb,OAAO,IAAI,CAAA;;;;oBAIK,IAAI,CAAC,WAAW;oBAChB,IAAI,CAAC,iBAAiB;;;0BAGhB,IAAI,CAAC,YAAY;;;YAG/B,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC;YAC3B,CAAC,CAAC,IAAI,CAAA;kBACI,IAAI,CAAC,OAAO,CAAC,GAAG,CACtB,CAAC,UAAU,EAAE,EAAE,CACX,IAAI,CAAA,2BAA2B,UAAU,sBAAsB,CACtE;oBACW;YACZ,CAAC,CAAC,0BAA0B;;;KAG/B,CAAC;IACJ,CAAC;;AAzGe,gBAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA4C3B,AA5CqB,CA4CpB;AAGF;IADC,QAAQ,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC;8CACR;AAGjB;IADC,QAAQ,CAAC,EAAC,IAAI,EAAE,KAAK,EAAC,CAAC;0CACD;AAtDZ,SAAS;IADrB,aAAa,CAAC,YAAY,CAAC;GACf,SAAS,CAgHrB","sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {css, html, LitElement} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport './ingredient'\n\n/**\n * This component is the one creating the search bar\n *\n * @fires count-changed - Indicates when the count changes\n * @slot - This element has a slot\n * @csspart button - The button\n */\n@customElement('search-bar')\nexport class SearchBar extends LitElement {\n\n  recipes_item : Recipe[] = [];\n\n  static override styles = css`\n    :host {\n      display: block;\n      font-family: Arial, sans-serif;\n      margin: 10px;\n    }\n    ul {\n      display: flex;\n      list-style: none;\n    }\n    .search-container {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 10px;\n    }\n\n    input {\n      padding: 8px;\n      font-size: 16px;\n      width: 250px;\n    }\n\n    button {\n      padding: 8px;\n      font-size: 16px;\n      background-color: #4CAF50;\n      color: white;\n      border: none;\n      cursor: pointer;\n    }\n\n    button:hover {\n      background-color: #45a049;\n    }\n\n    .result {\n      margin-top: 10px;\n      padding: 10px;\n      border: 1px solid #ddd;\n      width: 250px;\n      text-align: center;\n      display: flex;\n    }\n  `;\n\n  @property({type: String})\n  searchQuery = '';\n\n  @property({type: Array})\n  results: string[] = [];\n\n  handleInputChange(event: Event) : void {\n    const input = event.target as HTMLInputElement;\n    this.searchQuery = input.value;\n  }\n\n  handleSearch() {\n    if (this.searchQuery) {\n      this.results = this.results.concat(this.searchQuery.split(',').map(ingredient => ingredient.trim()).filter(ingredient => ingredient.length > 0));\n      this.searchQuery = ''; // Clear the input after submission\n      this.parse_recipes().then();\n    }\n  }\n\n  private async parse_recipes() {\n    const args = this.results.join(\",\");\n    const str = \"http://localhost:8080/api/recipes/search?ingredients=\" + args;\n    console.log(str);\n    const response = await fetch(str);\n    if (!response.ok) {\n      throw new Error(\"Unable to reach self hosted API\")\n    }\n    this.recipes_item = await response.json();\n    console.log(this.recipes_item)\n    console.log(this.recipes_item[0].directions)\n\n    const recipeListEl = document.querySelector('recipe-list') as any;\n    recipeListEl.recipes = this.recipes_item;\n  }\n\n\n  override render() {\n    return html`\n      <div class=\"search-container\">\n        <input\n          type=\"text\"\n          .value=\"${this.searchQuery}\"\n          @input=\"${this.handleInputChange}\"\n          placeholder=\"Entrez les ingrédients\"\n        />\n        <button @click=\"${this.handleSearch}\">Rechercher</button>\n\n        <div class=\"result\">\n          ${this.results.length > 0\n        ? html`<ul>\n                ${this.results.map(\n            (ingredient) =>\n                html`<ingredient-item .name=\"${ingredient}\"></ingredient-item>`\n        )}\n              </ul>`\n        : 'Aucun ingrédient ajouté.'}\n        </div>\n      </div>\n    `;\n  }\n\n\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'search-bar': SearchBar;\n  }\n}\n"]}